# ==============================================================================
# POLARI RESEARCH FRAMEWORK - ENVIRONMENT DEFAULTS
# ==============================================================================
# This file contains the BUILD-TIME DEFAULTS that get baked into Docker images.
# These are the base values used when no overrides are provided.
#
# ENVIRONMENT VARIABLE TIERS:
# ---------------------------
# Tier 1 (Build-time):    .env.defaults - Baked into image, cannot change after build
# Tier 2 (Startup-time):  .env or docker-compose environment - Override at container up
# Tier 3 (Runtime):       API/UI configurable - Change while container is running
#
# Variables are marked with their tier:
#   [T1] = Build-time only (requires rebuild to change)
#   [T2] = Can override at container startup
#   [T3] = Can change at runtime via UI/API
# ==============================================================================

# ==============================================================================
# DEPLOYMENT ENVIRONMENT [T1]
# ==============================================================================
DEPLOY_ENV=development
IN_DOCKER_CONTAINER=true

# ==============================================================================
# BACKEND CONFIGURATION
# ==============================================================================
# HTTP Configuration [T2]
BACKEND_URL=localhost
BACKEND_HTTP_PORT=3000

# HTTPS Configuration [T2]
BACKEND_HTTPS_ENABLED=true
BACKEND_HTTPS_PORT=2096

# API Configuration [T3] - Can be changed at runtime
BACKEND_API_TIMEOUT=30000
BACKEND_RETRY_INTERVAL=3000
BACKEND_MAX_RETRIES=10

# ==============================================================================
# FRONTEND CONFIGURATION
# ==============================================================================
# HTTP Configuration [T2]
# Note: Port 4201 to avoid conflict with PSC frontend on 4200
FRONTEND_URL=localhost
FRONTEND_HTTP_PORT=4201

# HTTPS Configuration [T2]
FRONTEND_HTTPS_ENABLED=true
FRONTEND_HTTPS_PORT=2087

# ==============================================================================
# SSL/TLS CONFIGURATION [T2]
# ==============================================================================
SSL_ENABLED=true
SSL_CERT_PATH=/app/certs/prf-proxy.crt
SSL_KEY_PATH=/app/certs/prf-proxy.key

# ==============================================================================
# CONNECTION DEFAULTS [T3] - Runtime configurable
# ==============================================================================
# Default protocol for API connections (http or https)
DEFAULT_PROTOCOL=http

# Preferred backend connection (can be changed at runtime)
PREFERRED_BACKEND_URL=localhost
PREFERRED_BACKEND_PORT=3000

# ==============================================================================
# SECURITY SETTINGS [T2]
# ==============================================================================
# Allow users to change backend URL/port via UI (set to false in production)
# This prevents potential attack vectors where users redirect to rogue backends
ALLOW_BACKEND_CHANGE=true

# Enable runtime configuration changes (set to false to lock all settings)
ENABLE_RUNTIME_CONFIG=true

# ==============================================================================
# LOGGING CONFIGURATION [T2]
# ==============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# ==============================================================================
# CORS CONFIGURATION [T2]
# ==============================================================================
CORS_ENABLED=true
CORS_ALLOW_ORIGINS=*

# ==============================================================================
# DATABASE CONFIGURATION [T1]
# ==============================================================================
DATABASE_TYPE=sqlite
DATABASE_PATH=./data/polari.db
